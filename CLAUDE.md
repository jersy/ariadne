# Ariadne é¡¹ç›®æŒ‡å—

## é¡¹ç›®æ¦‚è¿°

Ariadne æ˜¯ä¸€ä¸ª**æœ¬åœ°å¼€å‘å·¥å…·**ï¼Œä¸ºæ¶æ„å¸ˆ Agent æä¾›ä»£ç çŸ¥è¯†å›¾è°±åŠŸèƒ½ã€‚

**å…³é”®ç‰¹ç‚¹**ï¼š
- æœ¬åœ°å¼€å‘å·¥å…·ï¼Œå•ç”¨æˆ·ç¯å¢ƒ
- æ— å¤–éƒ¨ç½‘ç»œæš´éœ²
- å®¹å™¨åŒ–æœ¬åœ°éƒ¨ç½²
- ä¸ç”¨äºç”Ÿäº§ç¯å¢ƒ

---

## ä»£ç å®¡æŸ¥æŒ‡å—

### âš ï¸ æœ¬åœ°å¼€å‘å®‰å…¨ä¾‹å¤–

ä»¥ä¸‹å®‰å…¨é…ç½®**æ˜¯å¯æ¥å—çš„**ï¼Œä¸åº”åœ¨ä»£ç å®¡æŸ¥ä¸­æ ‡è®°ä¸ºé—®é¢˜ï¼š

| é—®é¢˜ | çŠ¶æ€ | åŸå›  |
|------|------|------|
| CORS: `allow_origins=["*"]` | âœ… å¯æ¥å— | ä»…æœ¬åœ°è®¿é—®ï¼Œæ— å¤–éƒ¨æš´éœ² |
| æ— èº«ä»½è®¤è¯ | âœ… å¯æ¥å— | å•å¼€å‘è€…ç¯å¢ƒ |
| é»˜è®¤ç»‘å®š `0.0.0.0` | âœ… å¯æ¥å— | å®¹å™¨å†…ä½¿ç”¨ï¼Œæ— å¤–éƒ¨ç½‘ç»œ |
| X-Forwarded-For ä¿¡ä»» | âœ… å¯æ¥å— | æ— åå‘ä»£ç† |

### åº”è¯¥å…³æ³¨çš„å®‰å…¨é—®é¢˜

ä»ç„¶éœ€è¦å®¡æŸ¥çš„**çœŸæ­£å®‰å…¨é—®é¢˜**ï¼š

| é—®é¢˜ç±»å‹ | ç¤ºä¾‹ | ä¸¥é‡æ€§ |
|----------|------|--------|
| SQL æ³¨å…¥ | åŠ¨æ€ SQL æ‹¼æ¥ | ğŸ”´ ä¸¥é‡ |
| è·¯å¾„éå† | æ–‡ä»¶æ“ä½œæœªéªŒè¯ `..` | ğŸ”´ ä¸¥é‡ |
| å‘½ä»¤æ³¨å…¥ | Shell å‘½ä»¤æ‹¼æ¥ | ğŸ”´ ä¸¥é‡ |
| è¾“å…¥éªŒè¯ | å‚æ•°é•¿åº¦ã€ç±»å‹éªŒè¯ | ğŸŸ¡ é‡è¦ |
| å¯†é’¥ç®¡ç† | API å¯†é’¥ç¡¬ç¼–ç  | ğŸŸ¡ é‡è¦ |
| N+1 æŸ¥è¯¢ | å¾ªç¯ä¸­æŸ¥è¯¢æ•°æ®åº“ | ğŸŸ¡ é‡è¦ |
| çº¿ç¨‹å®‰å…¨ | ç«æ€æ¡ä»¶ | ğŸŸ¡ é‡è¦ |
| å†…å­˜æ³„æ¼ | èµ„æºæœªé‡Šæ”¾ | ğŸŸ¡ é‡è¦ |

---

## æŠ€æœ¯æ ˆ

| ç»„ä»¶ | æŠ€æœ¯ | ç‰ˆæœ¬è¦æ±‚ |
|------|------|----------|
| è¯­è¨€ | Python | 3.12+ |
| HTTP API | FastAPI + Pydantic | latest |
| å­˜å‚¨ | SQLite | 3.x |
| å‘é‡å­˜å‚¨ | ChromaDB | 0.5+ |
| LLM | OpenAI-compatible API | - |

---

## ç›®å½•ç»“æ„

```
ariadne/
â”œâ”€â”€ ariadne_core/          # æ ¸å¿ƒè§£æå±‚
â”‚   â”œâ”€â”€ extractors/        # ASM å­—èŠ‚ç åˆ†æ
â”‚   â”œâ”€â”€ storage/           # SQLite + ChromaDB
â”‚   â””â”€â”€ models/            # æ•°æ®æ¨¡å‹
â”œâ”€â”€ ariadne_analyzer/      # åˆ†æå±‚
â”‚   â”œâ”€â”€ l1_business/       # L1 ä¸šåŠ¡å±‚
â”‚   â”œâ”€â”€ l2_architecture/   # L2 æ¶æ„å±‚
â”‚   â””â”€â”€ l3_implementation/ # L3 å®ç°å±‚
â”œâ”€â”€ ariadne_api/           # FastAPI æœåŠ¡
â”œâ”€â”€ ariadne_llm/           # LLM å®¢æˆ·ç«¯
â””â”€â”€ tests/                 # æµ‹è¯•
```

---

## å¼€å‘è§„èŒƒ

### Python ä»£ç é£æ ¼

- ä½¿ç”¨ **ruff** è¿›è¡Œæ ¼å¼åŒ–å’Œ linting
- ä½¿ç”¨ **mypy** è¿›è¡Œç±»å‹æ£€æŸ¥
- å‡½æ•°ä½¿ç”¨ç±»å‹æ³¨è§£
- ä½¿ç”¨ **async/await** å¤„ç† I/O æ“ä½œ

### æµ‹è¯•

- å•å…ƒæµ‹è¯•ï¼š`pytest tests/unit/`
- é›†æˆæµ‹è¯•ï¼š`pytest tests/integration/`
- æµ‹è¯•è¦†ç›–ç‡ç›®æ ‡ï¼š> 80%

### æäº¤è§„èŒƒ

ä½¿ç”¨ Conventional Commitsï¼š
- `feat:` æ–°åŠŸèƒ½
- `fix:` ä¿®å¤ bug
- `docs:` æ–‡æ¡£æ›´æ–°
- `refactor:` ä»£ç é‡æ„
- `test:` æµ‹è¯•ç›¸å…³
- `chore:` æ„å»º/å·¥å…·é“¾

---

## å¸¸ç”¨å‘½ä»¤

```bash
# è¿è¡ŒæœåŠ¡
uvicorn ariadne_api.app:app --reload

# è¿è¡Œæµ‹è¯•
pytest

# ä»£ç æ ¼å¼åŒ–
ruff format .
ruff check .

# ç±»å‹æ£€æŸ¥
mypy ariadne_core/
```

---

## ç›¸å…³æ–‡æ¡£

- **è®¡åˆ’æ–‡æ¡£**: `docs/plans/2026-01-31-feat-ariadne-codebase-knowledge-graph-plan.md`
- **å®¡æŸ¥æŒ‡å—**: `docs/reviews/review-guidelines.md`
- **æœ¬åœ°å¼€å‘å®‰å…¨ä¾‹å¤–**: `docs/solutions/development-workflows/local-dev-security-exceptions.md`

---

## é‡è¦æé†’

âš ï¸ **è¿™æ˜¯ä¸€ä¸ªæœ¬åœ°å¼€å‘å·¥å…·ï¼Œä¸æ˜¯ç”Ÿäº§ SaaS äº§å“ã€‚**

åœ¨å®¡æŸ¥ä»£ç æ—¶ï¼Œè¯·è®°ä½ï¼š
1. æŸäº›å®‰å…¨é™åˆ¶ï¼ˆè®¤è¯ã€CORSï¼‰å¯¹æœ¬åœ°å·¥å…·æ¥è¯´æ˜¯ä¸å¿…è¦çš„
2. ä¸“æ³¨äºçœŸæ­£çš„ä»£ç è´¨é‡é—®é¢˜ï¼ˆSQL æ³¨å…¥ã€N+1 æŸ¥è¯¢ã€çº¿ç¨‹å®‰å…¨ç­‰ï¼‰
3. ä¼˜å…ˆè€ƒè™‘æ­£ç¡®æ€§ã€æ€§èƒ½å’Œå¯ç»´æŠ¤æ€§
4. é¿å…è¿‡åº¦å·¥ç¨‹åŒ–
